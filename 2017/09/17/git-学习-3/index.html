<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>git 学习(3) - Hexo</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">git 学习(3)</h1><ul class="meta"><li><i class="icon icon-author"></i>jincurry</li><li><i class="icon icon-clock"></i>3 Minutes</li><li><i class="icon icon-calendar"></i>September 17, 2017</li></ul></div></div><div class="article-content" style="max-width:800px;"><h1 id="linux-mint下如何安装git以及与git相关的操作"><a href="#linux-mint下如何安装git以及与git相关的操作" class="headerlink" title="linux mint下如何安装git以及与git相关的操作"></a>linux mint下如何安装git以及与git相关的操作</h1><h2 id="1-标签管理"><a href="#1-标签管理" class="headerlink" title="1.标签管理"></a>1.标签管理</h2><p>git的标签是版本库的一个快照，但是标签的实质就是一个指向commit的一个指针，我们可以快速的查看到我们的标签。从而就可以从历史版本中取出来。</p>
<h4 id="1-1-创建标签"><a href="#1-1-创建标签" class="headerlink" title="1.1 创建标签"></a>1.1 创建标签</h4><p>首先使用命令<code>git branch</code>找到我们需要打标签的分支，然后<code>git checkout branch</code>切换到需要打标签的分支上。</p>
<p>然后使用命令<code>git tag v1.0</code>就可以打上一个新的标签了。使用<code>git tag</code>就可以查看所有的标签。默认标签是打在最新提交的commit的位置上，如果忘记在历史某个时间点打上标签，解决方法就是找到历史提交的commit id，然后打上标签就可以了。使用<code>git log --pretty=oneline --abbrev-commit</code>查看历史提交记录，使用<code>git tag &lt;commit id&gt;</code>就可以在历史时间打上标签了。</p>
<p>我们还可以创建带有说明的标签，用-a指定标签名，用-m来指定说明文字，使用<code>git show &lt;tagname&gt;</code>来查看说明文字。</p>
<p>使用<code>git tag -s &lt;tagname&gt; -m &quot;something&quot;</code>来使用PGP来签名标签。但我们需要安装gpg，我们需要进行配置Key。参考GnuPG帮助文档。</p>
<h4 id="1-2-操作标签"><a href="#1-2-操作标签" class="headerlink" title="1.2 操作标签"></a>1.2 操作标签</h4><p>使用<code>git tag -d &lt;tagname&gt;</code>来删除标签。推送标签到远程库时，使用命令<code>git push origin &lt;tagname&gt;</code>，一次性推送所有的尚未推送到远程的标签，使用命令<code>git push origin --tags</code>。</p>
<p>删除远程标签的方法：先从本地删除，使用<code>git tag -d &lt;tagname&gt;</code>，然后进行远程标签的删除，使用命令<code>git push origin:refs/tags/&lt;tagname&gt;</code>。</p>
<h2 id="2-自定义Git"><a href="#2-自定义Git" class="headerlink" title="2.自定义Git"></a>2.自定义Git</h2><h4 id="2-1-忽略自定义文件"><a href="#2-1-忽略自定义文件" class="headerlink" title="2.1 忽略自定义文件"></a>2.1 忽略自定义文件</h4><p>我们在git的根目录下创建一个特殊的<code>.gitignore</code>文件，然后我们将需要忽略的文件名添加进去，Git就会自动忽略这些文件。</p>
<p>忽略文件的原则是：<br>忽略操作系统自动生成的文件，比如缩略图等；<br>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如 Java 编译产生的.class文件；<br>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</p>
<h4 id="2-2-配置别名"><a href="#2-2-配置别名" class="headerlink" title="2.2 配置别名"></a>2.2 配置别名</h4><p>使用命令<code>git config --global alias.st staus</code>就表示将命令<code>git status</code>更改为命令<code>git st</code>，以后想要查看状态的时候，使用这一个命令就可以了。我们可以用一个形式来定义这个配置别名：<code>git config --global alias.&lt;othername&gt; command</code>。</p>
<h4 id="2-3-配置文件"><a href="#2-3-配置文件" class="headerlink" title="2.3 配置文件"></a>2.3 配置文件</h4><p>每个仓库的git配置文件都放在<code>.git/config</code>文件中，而当前的用户的git配置文件放在用户主目录的一个隐藏文件<code>.gitconfig</code>中。配置别名的时候，我们可以直接修改这个文件，当出现出错的时候，我们可以删掉文件进行重新配置。</p>
<h2 id="3-搭建git服务器"><a href="#3-搭建git服务器" class="headerlink" title="3.搭建git服务器"></a>3.搭建git服务器</h2><p>搭建git服务器需要准备一台运行linux的机器。</p>
<p>第一步：安装git <code>sudo apt-get install git</code>；</p>
<p>第二步：创建一个git用户，用来运行git服务 <code>sudo adduser git</code>；</p>
<p>第三步：创建证书登录，收集所有的需要登录的用户的公钥，就是他们的id_rsa.pub文件，把所有的公钥导入到/home/git/.ssh/authorized_keys文件里，一行放置一个。</p>
<p>第四步：初始化Git仓库，先选定一个目录作为git仓库，在该目录下输入命令<code>sudo git init --bare sample.git</code>，就初始化完成了一个裸仓库。</p>
<p>第五步：禁用shell登录，出于安全考虑，第二步创建的 git 用户不允许登录 shell，这可以通过编辑/etc/passwd文件完成。找到类似下面的一行<code>git:x:1001:1001:,,,:/home/git:/bin/bash</code>改为：<br><code>git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</code><br>这样，git用户可以正常通过 ssh 使用 git，但无法登录 shell，因为我们为git用户指定的git-shell每次一登录就自动退出。</p>
<p>第六步：克隆远程库，使用命令<code>git clone git@server:/catolog/sample.git</code>在各自的用户下进行运行，这样每个用户就可以在本地修改然后推送到远程库上。这样就完成了一个git服务器的一个搭建。</p>
</div><div class="article-meta" style="max-width:800px;"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">3</span></li></ul></div></div><div class="article-comment" style="max-width:800px;"><div class="ds-thread" id="ds-thread" data-thread-key="cjd89d9z90003asvgr6g38i3w" data-title="git 学习(3)" data-url="http://yoursite.com/2017/09/17/git-学习-3/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2017/09/16/git-学习-2/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/BoizZ" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/heqibang" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a href="https://www.segmentfault.com/u/bon" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2018 Hexo<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>